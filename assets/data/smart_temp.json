[
  {
    "id": "2ff2c1f18c1db16e",
    "type": "trigger-state",
    "z": "638aa4565f963e7b",
    "name": "Living Room Temperature Changed",
    "server": "",
    "version": 0,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityid": "sensor.living_room_temperature",
    "entityidfiltertype": "exact",
    "debugenabled": false,
    "constraints": [
      {
        "targetType": "this_entity",
        "targetValue": "",
        "propertyType": "current_state",
        "comparatorType": "<",
        "comparatorValueDatatype": "jsonata",
        "comparatorValue": "$entities(\"input_number.target_fireplace_temperature\").state",
        "propertyValue": "new_state.state"
      }
    ],
    "outputs": 2,
    "customoutputs": [],
    "outputinitially": false,
    "state_type": "num",
    "x": 180,
    "y": 300,
    "wires": [
      [
        "bd0219039dc62f01"
      ],
      [
        "1f2436717767b503"
      ]
    ],
    "outputLabels": [
      "< 68F",
      ">= 68F"
    ],
    "info": "This triggers when the living room temperature\nchanges. If the temperature < 68F it will go to\noutput 1, otherwise it will go to output 2."
  },
  {
    "id": "bd0219039dc62f01",
    "type": "api-current-state",
    "z": "638aa4565f963e7b",
    "name": "Smart Temp Enabled?",
    "server": "",
    "version": 2,
    "outputs": 2,
    "halt_if": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.enable_fireplace",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "override_topic": false,
    "state_location": "payload",
    "override_payload": "msg",
    "entity_location": "data",
    "override_data": "msg",
    "x": 540,
    "y": 260,
    "wires": [
      [
        "b0e6cfa806757072"
      ],
      []
    ],
    "outputLabels": [
      "Enabled",
      "Disabled"
    ]
  },
  {
    "id": "c742506d6a9c28b4",
    "type": "api-call-service",
    "z": "638aa4565f963e7b",
    "name": "Turn fireplace On",
    "server": "",
    "version": 3,
    "debugenabled": false,
    "service_domain": "light",
    "service": "turn_on",
    "entityId": "light.fireplace",
    "data": "",
    "dataType": "jsonata",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1110,
    "y": 260,
    "wires": [
      []
    ]
  },
  {
    "id": "1f2436717767b503",
    "type": "api-current-state",
    "z": "638aa4565f963e7b",
    "name": "Smart Temp Enabled?",
    "server": "",
    "version": 2,
    "outputs": 2,
    "halt_if": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.enable_fireplace",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "override_topic": false,
    "state_location": "payload",
    "override_payload": "msg",
    "entity_location": "data",
    "override_data": "msg",
    "x": 540,
    "y": 320,
    "wires": [
      [
        "490102e7e18cca0e"
      ],
      []
    ],
    "outputLabels": [
      "Enabled",
      "Disabled"
    ]
  },
  {
    "id": "f79928c0a5692e25",
    "type": "api-call-service",
    "z": "638aa4565f963e7b",
    "name": "Turn fireplace Off",
    "server": "",
    "version": 3,
    "debugenabled": false,
    "service_domain": "light",
    "service": "turn_off",
    "entityId": "light.fireplace",
    "data": "",
    "dataType": "jsonata",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1110,
    "y": 320,
    "wires": [
      []
    ]
  },
  {
    "id": "83d4315f95d5c1f0",
    "type": "comment",
    "z": "638aa4565f963e7b",
    "name": "Smart On/Off Based on Temperature",
    "info": "If the fireplace is enabled, this will automatically turn it on/off based on the temperature.  If the temperature in the room exceeds 68F, it will turn it off, otherwise it will turn it on.",
    "x": 180,
    "y": 220,
    "wires": []
  },
  {
    "id": "490102e7e18cca0e",
    "type": "looptimer-advanced",
    "z": "638aa4565f963e7b",
    "duration": "15",
    "units": "Second",
    "maxloops": "3",
    "maxtimeout": "1",
    "maxtimeoutunits": "Hour",
    "name": "Try 3x with a 15s delay between attempts",
    "x": 820,
    "y": 320,
    "wires": [
      [
        "f79928c0a5692e25"
      ],
      []
    ]
  },
  {
    "id": "b0e6cfa806757072",
    "type": "looptimer-advanced",
    "z": "638aa4565f963e7b",
    "duration": "15",
    "units": "Second",
    "maxloops": "3",
    "maxtimeout": "1",
    "maxtimeoutunits": "Hour",
    "name": "Try 3x with a 15s delay between attempts",
    "x": 820,
    "y": 260,
    "wires": [
      [
        "c742506d6a9c28b4"
      ],
      []
    ]
  }
]